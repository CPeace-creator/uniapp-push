{"version":3,"file":"edit.js","sources":["page_push/edit/edit.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZV9wdXNoXGVkaXRcZWRpdC52dWU"],"sourcesContent":["<template>\n\t<view class=\"editPage\">\n\t\t<uni-notice-bar show-icon text=\"最多可创建9个奖项,最多支持300人参与游戏抽奖\"></uni-notice-bar>\r\n\t\t\t<view class=\"awards\">\r\n\t\t\t<view class=\"headTitle\">——奖品奖项——</view>\r\n\t\t\t<view class=\"option\" v-for=\"(item,index) in awardsList\" :key=\"item.id\">\r\n\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t<view class=\"left\" @click=\"addPic(index)\">\r\n\t\t\t\t\t\t<view class=\"pic\">\r\n\t\t\t\t\t\t\t<image v-if=\"item.picUrl\" :src=\"item.picUrl\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t<uni-icons v-else type=\"image\" size=\"50\" color=\"#555\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t\t\t更换图片\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t<view class=\"row\">\r\n\t\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" v-model=\"item.name\"  placeholder=\"请输入奖项名称\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"remove\" @click=\"removeAwards(index)\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"minus-filled\" size=\"30\" color=\"#ee4626\" v-if=\"true\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"row\">\r\n\t\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"请输入奖品名称\" v-model=\"item.description\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"row\">\r\n\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t奖品份数\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t<uv-number-box v-model=\"item.number\"></uv-number-box>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"addBox\">\r\n\t\t\t\t<view class=\"btn\" @click=\"addAwards\">\r\n\t\t\t\t\t增加奖项\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"rule\">\r\n\t\t\t\t<view class=\"headTitle\">——规则说明——</view>\r\n\t\t\t\t<textarea v-model=\"ruleText\" placeholder=\"请输入规则说明\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"more\">\r\n\t\t\t\t<view class=\"headTitle\">——更多选项——</view>\r\n\t\t\t</view>\n\t</view>\n</template>\n\n<script setup>\r\nimport {ref} from 'vue'\r\nimport { getUUId,getFileExtension } from '../../utils/tools';\r\nimport {dayjs} from 'dayjs'\nconst awardsList=ref([\r\n\t{\r\n\t\tname:'一等奖',\r\n\t\tdescription:'',\r\n\t\tpicUrl:'',\r\n\t\tnumber:1,\r\n\t\tid:getUUId()\r\n\t},\r\n\t{\r\n\t\tname:'二等奖',\r\n\t\tdescription:'',\r\n\t\tpicUrl:'',\r\n\t\tnumber:2,\r\n\t\tid:getUUId()\r\n\t},\r\n])\r\nconst addAwards=()=>{\r\n\tawardsList.value.push({\r\n\t\tname:'',\r\n\t\tdescription:'',\r\n\t\tpicUrl:'',\r\n\t\tnumber:1,\r\n\t\tid:getUUId()\r\n\t})\r\n}\r\n\r\nconst removeAwards=async(index)=>{\r\n\tlet res= await uni.showModal({\r\n\t\ttitle:'是否删除奖项'\t\r\n\t})\r\n\tif(res.confirm){\r\n\t\tawardsList.value.splice(index,1)\r\n\t}\r\n}\r\n\r\n//规则说明\r\nconst ruleText=ref(`1.点击参与报名参加活动;\r\n2.参与后无需额外操作,等待主办方发起抽奖;\r\n3.抽奖成功后会将抽奖结果返回,可在右上角点击查看;\r\n4.将获奖记录给现成工作人员核销后,领取对应的奖品`)\r\n\r\n//添加图片\r\nconst addPic=(index)=>{\r\n\tuni.chooseImage({\r\n\t\tcount:1,\r\n\t\tsuccess: (res) => {\r\n\t\t\tif(res.tempFilePaths.length>0){\r\n\t\t\t\tconsole.log(res.tempFilePaths);\r\n\t\t\t\tlet filePath = res.tempFilePaths[0]\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask:true,\r\n\t\t\t\t\ttitle:\"上传中\"\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.uploadFile({\r\n\t\t\t\t\tfilePath,\r\n\t\t\t\t\tcloudPathAsRealPath:true,\r\n\t\t\t\t\tcloudPath:`raffle/${dayjs().format(\"YYYYMMDD\")}/${getUUId()}_${index}.${getFileExtension()}`,\r\n\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tawardsList.value[index].picUrl =res.fileID\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:error=>{\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tconsole.log(res);\r\n\t\t}\r\n\t})\r\n}\n</script>\n\n<style scoped lang=\"scss\">\n.editPage{\r\n\t.headTitle{\r\n\t\tfont-size: 34rpx;\r\n\t\tline-height: 2rem;\r\n\t\tfont-weight: bolder;\r\n\t\ttext-align: center;\r\n\t\tcolor: #ee4626;\r\n\t\tpadding-bottom: 30rpx;\r\n\t}\r\n\t.awards{\r\n\t\t.option{\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tpadding-bottom: 0;\r\n\t\t\tborder-bottom: 14rpx solid #f4f4f4;\r\n\t\t\t.row{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tfont-size: 34rpx;\r\n\t\t\t\tborder-bottom: 1rpx solid #f4f4f4;\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tpadding: 10rpx 0;\r\n\t\t\t}\r\n\t\t\t.top{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\t.left{\r\n\t\t\t\t\twidth: 160rpx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t.pic{\r\n\t\t\t\t\t\twidth: 120rpx;\r\n\t\t\t\t\t\theight: 120rpx;\r\n\t\t\t\t\t\tbackground: #f4f4f4;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\timage{\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.text{\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tcolor:#999;\r\n\t\t\t\t\t\tline-height: 2em;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.right{\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t.row{\r\n\t\t\t\t\t\t.name{\r\n\t\t\t\t\t\t\tfont-size: 38rpx;\r\n\t\t\t\t\t\t\tfont-weight: bolder;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.addBox{\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tpadding:60rpx 0;\r\n\t\t\tbackground: #f4f4f4;\r\n\t\t\t.btn{\r\n\t\t\t\tborder: 1px solid #ee4626;\r\n\t\t\t\tpadding: 15rpx 35rpx;\r\n\t\t\t\tcolor: #ee4626;\r\n\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\tborder-radius: 200rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.rule{\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tmargin-top: 60rpx;\r\n\t\t\ttextarea{\r\n\t\t\t\tbackground: #fafafa;\r\n\t\t\t\tborder: 1px solid #efefef;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tpadding: 10rpx 20rpx;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tline-height: 1.7em;\r\n\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\tmin-height: 380rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n</style>\n","import MiniProgramPage from 'D:/UniAppCloud/uniapp-push/page_push/edit/edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getUUId","uni","uniCloud","dayjs","getFileExtension","res"],"mappings":";;;;;;;;;;;;;;;;;;AAgEA,UAAM,aAAWA,cAAAA,IAAI;AAAA,MACpB;AAAA,QACC,MAAK;AAAA,QACL,aAAY;AAAA,QACZ,QAAO;AAAA,QACP,QAAO;AAAA,QACP,IAAGC,YAAAA,QAAS;AAAA,MACZ;AAAA,MACD;AAAA,QACC,MAAK;AAAA,QACL,aAAY;AAAA,QACZ,QAAO;AAAA,QACP,QAAO;AAAA,QACP,IAAGA,YAAAA,QAAS;AAAA,MACZ;AAAA,IACF,CAAC;AACD,UAAM,YAAU,MAAI;AACnB,iBAAW,MAAM,KAAK;AAAA,QACrB,MAAK;AAAA,QACL,aAAY;AAAA,QACZ,QAAO;AAAA,QACP,QAAO;AAAA,QACP,IAAGA,YAAAA,QAAS;AAAA,MACd,CAAE;AAAA,IACF;AAEA,UAAM,eAAa,OAAM,UAAQ;AAChC,UAAI,MAAK,MAAMC,cAAG,MAAC,UAAU;AAAA,QAC5B,OAAM;AAAA,MACR,CAAE;AACD,UAAG,IAAI,SAAQ;AACd,mBAAW,MAAM,OAAO,OAAM,CAAC;AAAA,MAC/B;AAAA,IACF;AAGA,UAAM,WAASF,cAAG,IAAC;AAAA;AAAA;AAAA,0BAGO;AAG1B,UAAM,SAAO,CAAC,UAAQ;AACrBE,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAM;AAAA,QACN,SAAS,CAAC,QAAQ;AACjB,cAAG,IAAI,cAAc,SAAO,GAAE;AAC7BA,0BAAA,MAAA,MAAA,OAAA,kCAAY,IAAI,aAAa;AAC7B,gBAAI,WAAW,IAAI,cAAc,CAAC;AAClCA,0BAAAA,MAAI,YAAY;AAAA,cACf,MAAK;AAAA,cACL,OAAM;AAAA,YACX,CAAK;AACDC,0BAAAA,GAAS,WAAW;AAAA,cACnB;AAAA,cACA,qBAAoB;AAAA,cACpB,WAAU,UAAUC,cAAK,iBAAA,MAAA,EAAG,OAAO,UAAU,CAAC,IAAIH,YAAO,QAAA,CAAE,IAAI,KAAK,IAAII,YAAAA,iBAAkB,CAAA;AAAA,cAC1F,SAAQ,CAAAC,SAAK;AACZJ,8BAAAA,MAAY,MAAA,OAAA,kCAAAI,IAAG;AACfJ,8BAAAA,MAAI,YAAa;AACjB,2BAAW,MAAM,KAAK,EAAE,SAAQI,KAAI;AAAA,cACpC;AAAA,cACD,MAAK,WAAO;AACXJ,8BAAAA,MAAA,MAAA,OAAA,kCAAY,KAAK;AACjBA,8BAAG,MAAC,YAAW;AAAA,cACf;AAAA,YACN,CAAK;AAAA,UACD;AACDA,wBAAAA,MAAY,MAAA,OAAA,kCAAA,GAAG;AAAA,QACf;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtIA,GAAG,WAAW,eAAe;"}